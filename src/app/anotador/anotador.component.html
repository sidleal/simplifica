<div class="row">
  <div class="small-12 centered columns">
    <h4>{{stageTitle}}</h4>
    
    <input type="text" id="search" placeholder="Pesquisar" (keyup.enter)="search()" [(ngModel)]="searchText" *ngIf="showSearch"/>

    <div id="corpora" *ngIf="stage == 'corpora'">
      <button (click)="newCorpus()" id="btnNewCorpus" class="default">Novo Córpus</button>
      <button (click)="backToMenu()" id="btnCorporaBack" class="natural">Voltar para Menu</button>
      <div id="details-container-corpora" class="details-container"> 
          <a (click)="selectCorpus(corpus.$key, corpus.name)" *ngFor="let corpus of corpora | async">
            {{corpus.name}}<br/><p>({{corpus.source}})</p>
          </a>
      </div>
    </div>

    <div id="productions" *ngIf="stage == 'productions'">
      <button (click)="newProduction()" id="btnNewProd" class="default">Nova Produção</button>
      <button (click)="listCorpora()" id="btnProdBack" class="natural">Voltar para Córpus</button>
      <div id="details-container-productions" class="details-container"> 
          <a (click)="selectProduction(prod.$key, prod.title)" *ngFor="let prod of productions | async">
            {{prod.title}}<br/><p>{{prod.author}} - {{prod.published}}</p>
          </a>
      </div>
    </div>

    <div id="simplifications" *ngIf="stage == 'simplifications'">
      <button (click)="newSimplification()" id="btnNewSimpl" class="default">Nova Simplificação</button>
      <button (click)="listProductions()" id="btnSimplBack" class="natural">Voltar para Produções</button>

      <div id="details-container-simplifications" class="details-container"> 
          <a (click)="selectSimplification(simp.$key, simp.name)" *ngFor="let simp of simplifications | async">
            {{simp.name}}<br/><p>{{simp.tags}}</p>
          </a>
      </div>
    </div>

    <div id="newCorpus" *ngIf="stage == 'newCorpus'">
      <input type="text" id="corpusName" placeholder="Nome" [(ngModel)]="corpusName"/>
      <input type="text" id="corpusSource" placeholder="Fonte" [(ngModel)]="corpusSource"/>
      <input type="text" id="corpusGenre" placeholder="Gênero" [(ngModel)]="corpusGenre"/>
      <button (click)="saveCorpus()" id="btnSaveCorpus" class="default">Gravar</button>
      <button (click)="listCorpora()" id="btnBackCorpus" class="natural">Voltar</button>
    </div>

    <div id="newProduction" *ngIf="stage == 'newProduction'">
      <input type="file" (change)="changeListener($event)" >
      <input type="text" id="productionTitle" placeholder="Título" [(ngModel)]="productionTitle"/>
      <input type="text" id="productionSubTitle" placeholder="SubTítulo" [(ngModel)]="productionSubTitle"/>
      <input type="text" id="productionAuthor" placeholder="Autor" [(ngModel)]="productionAuthor"/>
      <input type="text" id="productionPublished" placeholder="Data Publicação" [(ngModel)]="productionPublished"/>
      <input type="text" id="productionSource" placeholder="Fonte" [(ngModel)]="productionSource"/>      
      <textarea id="productionContent" placeholder="Conteúdo" [(ngModel)]="productionContent" rows="20"></textarea>
      <button (click)="saveProduction()" id="btnSaveProduction">Gravar</button>
      <button (click)="listProductions()" id="btnBackProduction" class="natural">Voltar</button>
    </div>

    <div id="newSimplification" *ngIf="stage == 'newSimplification'">
      <div class="row">
        <div class="small-12 large-6 columns">
          <label for="simplificationName">Nome:</label>
          <input type="text" id="simplificationName" placeholder="Nome simples para identificar o bitexto" [(ngModel)]="simplificationName"/>
          <label for="simplificationFrom">Texto base:</label>
          <select id="simplificationFrom" [(ngModel)]="simplificationFrom" required>
            <option *ngFor="let text of texts | async" [value]="text.$key">Nível {{text.level}} - {{text.title}}</option>
          </select>
          <label for="simplificationTag">Tags:</label>
          <input type="text" id="simplificationTag" placeholder="Digite uma nova tag seguida por enter" [(ngModel)]="simplificationTag"/>
          <button (click)="saveNewSimplification()" id="btnSaveNewSimplification">Gravar</button>
          <button (click)="listSimplifications()" id="btnBackSimplification" class="natural">Voltar</button>
        </div> 
      </div>
    </div>

    <div id="doSimplification" *ngIf="stage == 'doSimplification'">
      <div class="row">
        <div class="small-12 large-6 centered columns">
          <h5>{{(simplificationTextFrom | async)?.title}}</h5>
          <h6>{{(simplificationTextFrom | async)?.subTitle}}</h6>
          <div>{{parsedSimplificationTextFrom}}</div>
        </div>
        <div class="small-12 large-6 centered columns">
          <input type="text" id="simplificationToTitle" placeholder="Título" [(ngModel)]="simplificationToTitle"/>
          <input type="text" id="simplificationToSubTitle" placeholder="SubTítulo" [(ngModel)]="simplificationToSubTitle"/>
          <textarea id="simplificationToContent" placeholder="Conteúdo" [(ngModel)]="simplificationToContent" rows="20"></textarea>
        </div>
        <button (click)="saveSimplification()" id="btnSaveSimplification">Gravar</button>
        <button (click)="listSimplifications()" id="btnBackSimplification" class="natural">Voltar</button>
      </div> 
    </div>

  </div>
</div>

