
<div class="row">
  <div class="small-12 centered columns">
    <div>  
      <div id="breadcrumb">: : {{breadcrumb}}</div>
      <a class="btn btn-danger" (click)="back()" data-toggle="tooltip" title="Voltar">
        <i class="fa fa-arrow-left fa-2x"></i>
      </a>
    </div>
    
    <div id="menu" *ngIf="stage == 'menu'">
      <div class="row">
        <div class="small-8 large-3 centered columns">
          <button (click)="newCorpus()" id="btnNewCorpus" class="natural">Criar Novo Córpus</button>
        </div>
      </div>
      <div class="row">
        <div class="small-8 large-3 centered columns">
          <button (click)="listCorpora()" id="btnListCorpus" class="natural">Meus Corpora</button>
        </div>
      </div>
    </div>

    <div id="corpora" *ngIf="stage == 'corpora'">
      <p>(clique sobre o nome do corpus para selecioná-lo)</p>
      <div id="details-container-corpora" class="details-container"> 
          <a (click)="selectCorpus(corpus.$key, corpus.name)" *ngFor="let corpus of corpora | async">
            {{corpus.name}}<br/>
            <p>({{corpus.source}})</p>
            <i class="fa fa-trash-o inner-button" data-toggle="tooltip" title="Excluir" (click)="deleteCorpus(corpus.$key);$event.stopPropagation();"></i>
          </a>
      </div>
    </div>

    <div id="textMenu" *ngIf="stage == 'textMenu'">
      <div class="row">
        <div class="small-8 large-3 centered columns">
          <button (click)="newText()" class="default">Importar Novo Texto</button>
        </div>
      </div>
      <div class="row">
        <div class="small-8 large-3 centered columns">
          <button (click)="listTexts()" class="default">Simplificar Texto</button>
        </div>
      </div>
      <div class="row">
        <div class="small-8 large-3 centered columns">
          <button (click)="listSimplifications()" class="default">Editar Simplificação Existente</button>
        </div>
      </div>
    </div>

    <div *ngIf="stage == 'texts'">
      <input type="text" placeholder="Pesquisar" (keyup.enter)="search()" [(ngModel)]="searchText"/>
      <input type="checkbox" checked="true"/>Original <input type="checkbox" checked="true"/>Simplificação
      <div class="details-container"> 
          <a (click)="selectText(text.$key, text.title)" *ngFor="let text of texts | async">
            {{text.title}}<br/><p>{{text.name}}<br/>{{text.source}}<br/>Nível {{text.level}} ({{text.published}})</p>
            <i class="fa fa-trash-o inner-button" data-toggle="tooltip" title="Excluir" (click)="deleteText(text.$key);$event.stopPropagation();"></i>            
          </a>
      </div>
    </div>

    <div id="simplifications" *ngIf="stage == 'simplifications'">
      <div class="details-container"> 
          <a (click)="selectSimplification(simp.$key, simp.name)" *ngFor="let simp of simplifications | async">
            {{simp.name}}<br/><p>{{simp.tags}}<br/>({{simp.updated}})</p>
          </a>
      </div>
    </div>

    <div id="newCorpus" *ngIf="stage == 'newCorpus'">
      <div class="row">
        <div class="small-12 large-6 columns centered">
          <label for="corpusName">Nome:</label>
          <input type="text" id="corpusName" placeholder="Nome" [(ngModel)]="corpusName"/>
          <label for="corpusSource">Fonte:</label>
          <input type="text" id="corpusSource" placeholder="Fonte" [(ngModel)]="corpusSource"/>
          <label for="corpusGenre">Gênero:</label>
          <input type="text" id="corpusGenre" placeholder="Gênero" [(ngModel)]="corpusGenre"/>
          <button (click)="saveCorpus()" id="btnSaveCorpus" class="default">Gravar</button>
        </div>
      </div>
    </div>

    <div id="newText" *ngIf="stage == 'newText'">
      <input type="file" (change)="changeListener($event)" >
      <input type="text" placeholder="Nome do Arquivo" [(ngModel)]="textName"/>
      <input type="text" placeholder="Título" [(ngModel)]="textTitle"/>
      <input type="text" placeholder="SubTítulo" [(ngModel)]="textSubTitle"/>
      <input type="text" placeholder="Autor" [(ngModel)]="textAuthor"/>
      <input type="text" placeholder="Data Publicação" [(ngModel)]="textPublished"/>
      <input type="text" placeholder="Fonte" [(ngModel)]="textSource"/>      
      <textarea placeholder="Conteúdo" [(ngModel)]="textContent" rows="20"></textarea>
      <button (click)="saveText()" id="btnSaveText">Gravar</button>
    </div>

    <div id="doSimplification" *ngIf="stage == 'doSimplification'">

      <div class="row">
        <div class="small-12 large-6 columns centered">
          <label for="simplificationName">Nome:</label>
          <input type="text" id="simplificationName" placeholder="Nome simples para identificar o bitexto" [(ngModel)]="simplificationName"/>
          <label for="simplificationTag">Tags:</label>
          <input type="text" id="simplificationTag" placeholder="Digite as tags separadas por vírgula" [(ngModel)]="simplificationTag"/>
        </div> 
      </div>

      <div class="row">
        <div class="small-12 large-6 centered columns">
          <div class="titles">{{(simplificationTextFrom | async)?.title}}</div>
          <div class="titles">{{(simplificationTextFrom | async)?.subTitle}}</div>
        </div>
        <div class="small-12 large-6 centered columns">
          <div contenteditable="true" class="titles">{{simplificationToTitle}}</div>
          <div contenteditable="true" class="titles">{{simplificationToSubTitle}}</div>
        </div>
      </div>
      <div class="row">
        <div class="small-12 large-6 centered columns">
          <div class="editor">
            <ng-template dynamic-template
              [template]="parsedSimplificationTextFrom"
              [context]="context">
            </ng-template>
          </div>
        </div>
        <div class="small-12 large-6 centered columns">
          <div contenteditable="true" class="editor">
            <ng-template dynamic-template
              [template]="parsedSimplificationTextTo"
              [context]="context">
            </ng-template>
          </div>
        </div>
      </div> 

      <div class="row">
        <div class="small-12 large-6 columns">
          <button (click)="saveSimplification()" id="btnSaveSimplification">Gravar</button>
        </div>
      </div>

    </div>

  </div>
</div>

